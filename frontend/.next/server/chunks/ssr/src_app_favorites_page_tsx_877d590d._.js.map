{"version":3,"sources":["turbopack:///[project]/src/app/favorites/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport MovieCard from \"@/components/MovieCard\";\r\nimport Pagination from \"@/components/pagination\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useAddToFavorites, useFavorites, useRemoveFromFavorites } from \"@/hooks/useMovies\";\r\nimport { Movie } from \"@/types/movie\";\r\nimport Link from \"next/link\";\r\n\r\nconst Favorites = () => {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const { data: favorites, isLoading, error } = useFavorites(currentPage);\r\n  \r\n  const addToFavorites = useAddToFavorites();\r\n  const removeFromFavorites = useRemoveFromFavorites();\r\n\r\n  const handleToggleFavorite = async (movie: Movie) => {\r\n    if (addToFavorites.isPending || removeFromFavorites.isPending) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await removeFromFavorites.mutateAsync(movie.imdbID);\r\n      \r\n      if (favorites?.data.favorites.length === 1 && currentPage > 1) {\r\n        setCurrentPage(currentPage - 1);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to remove favorite:', error);\r\n    }\r\n  };\r\n\r\n  const handlePageChange = (page: number) => {\r\n    const totalPages = favorites?.data.totalPages || 1;\r\n    if (page >= 1 && page <= totalPages) {\r\n      setCurrentPage(page);\r\n      if (typeof window !== 'undefined') {\r\n        window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n      }\r\n    }\r\n  };\r\n  \r\n  const totalResults = favorites?.data.totalResults \r\n    ? parseInt(favorites.data.totalResults, 10)\r\n    : 0;\r\n\r\n  const isMutating = addToFavorites.isPending || removeFromFavorites.isPending;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-hero\">\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"inline-block h-12 w-12 animate-spin rounded-full border-4 border-primary border-r-transparent\" />\r\n            <p className=\"mt-4 text-muted-foreground\">Loading favorites...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-hero\">\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          <div className=\"text-center py-12\">\r\n            <p className=\"text-xl text-red-500 mb-2\">Error loading favorites</p>\r\n            <p className=\"text-muted-foreground\">{error.message}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-hero\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"mb-12\">\r\n          <div className=\"flex items-center justify-center gap-3 mb-6\">\r\n            <h1 className=\"text-4xl md:text-5xl text-white font-bold bg-clip-text\">\r\n              My Favorites\r\n            </h1>\r\n          </div>\r\n          <p className=\"text-center text-muted-foreground\">\r\n            {totalResults} {totalResults === 1 ? \"movie\" : \"movies\"} saved\r\n          </p>\r\n        </div>\r\n\r\n        {totalResults === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <h2 className=\"text-2xl font-semibold mb-2\">No Favorites Yet</h2>\r\n            <p className=\"text-muted-foreground mb-6\">\r\n              Start adding movies to your favorites from the search page\r\n            </p>\r\n            <Link href=\"/\">\r\n              <Button className=\"bg-gradient-primary\">\r\n                Search Movies\r\n              </Button>\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\r\n              {favorites?.data.favorites.map((movie: Movie) => (\r\n                <MovieCard\r\n                  key={movie.imdbID}\r\n                  movie={movie}\r\n                  isFavorite={true}\r\n                  onToggleFavorite={handleToggleFavorite}\r\n                  disabled={isMutating}\r\n                />\r\n              ))}\r\n            </div>\r\n\r\n            {favorites?.data.totalPages && favorites.data.totalPages > 1 && (\r\n              <Pagination\r\n                currentPage={currentPage}\r\n                totalPages={favorites.data.totalPages}\r\n                onPageChange={handlePageChange}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Favorites;\r\n"],"names":[],"mappings":"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"}